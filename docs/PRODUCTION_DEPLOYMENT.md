# –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è QA MCP —Å–µ—Ä–≤–µ—Ä–∞

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –º—ñ—Å—Ç–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è QA MCP —Å–µ—Ä–≤–µ—Ä–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.

## –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

### –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏

**–ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ:**
- CPU: 2 —è–¥—Ä–∞
- RAM: 4 GB
- –î–∏—Å–∫: 20 GB SSD
- –ú–µ—Ä–µ–∂–∞: 100 Mbps

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ:**
- CPU: 4+ —è–¥—Ä–∞
- RAM: 8+ GB
- –î–∏—Å–∫: 50+ GB SSD
- –ú–µ—Ä–µ–∂–∞: 1 Gbps

### –û–ø–µ—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞

- Ubuntu 20.04 LTS –∞–±–æ –Ω–æ–≤—ñ—à–∞
- CentOS 8+ –∞–±–æ RHEL 8+
- Debian 11+

### –ü—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è

- Docker 20.10+
- Docker Compose 2.0+
- Python 3.11+
- Nginx (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–∏—Å—Ç–µ–º–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Cursor IDE    ‚îÇ    ‚îÇ   Load Balancer ‚îÇ    ‚îÇ   MCP Server    ‚îÇ
‚îÇ                 ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (Nginx)       ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (FastAPI)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                       ‚îÇ
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
                       ‚îÇ   MySQL DB      ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
                       ‚îÇ   (Primary)     ‚îÇ            ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
                                                       ‚îÇ
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
                       ‚îÇ   Qdrant        ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ   (Vector DB)   ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ú–µ—Ä–µ–∂–µ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
Internet
    ‚îÇ
    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Firewall  ‚îÇ (UFW/iptables)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ
    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Nginx     ‚îÇ (Reverse Proxy + SSL)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ
    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ MCP Server  ‚îÇ (Docker Container)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ
    ‚îú‚îÄ‚îÄ‚ñ∫ MySQL (Docker Container)
    ‚îî‚îÄ‚îÄ‚ñ∫ Qdrant (Docker Container)
```

## –ü–æ–∫—Ä–æ–∫–æ–≤–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
sudo apt update && sudo apt upgrade -y

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤
sudo apt install -y curl wget git htop ufw fail2ban

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å—É
sudo timedatectl set-timezone Europe/Kiev

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –¥–æ–¥–∞—Ç–∫—É
sudo useradd -m -s /bin/bash qa-mcp
sudo usermod -aG docker qa-mcp
```

### –ö—Ä–æ–∫ 2: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Docker

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
sudo ./scripts/setup_production_server.sh --port 3000

# –ê–±–æ —Ä—É—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER
```

### –ö—Ä–æ–∫ 3: –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É

```bash
# –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
git clone https://github.com/your-org/qa_mcp.git
cd qa_mcp

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤
sudo chown -R qa-mcp:qa-mcp /path/to/qa_mcp
```

### –ö—Ä–æ–∫ 4: –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

```bash
# –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
cp env.example .env

# –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
nano .env
```

**–ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è `.env`:**
```bash
# OpenAI Configuration
OPENAI_API_KEY=your_production_openai_key
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Database Configuration
MYSQL_DSN=mysql+pymysql://qa:secure_password@mysql:3306/qa
VECTORDB_URL=http://qdrant:6333

# Application Configuration
APP_PORT=3000
MAX_TOP_K=50
ENVIRONMENT=production

# Security
SECRET_KEY=your_very_secure_secret_key_here
ALLOWED_HOSTS=your-domain.com,localhost

# Monitoring
LOG_LEVEL=INFO
ENABLE_METRICS=true
```

### –ö—Ä–æ–∫ 5: –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑ –¥–∞–Ω–∏—Ö

```bash
# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑ –Ω—É–ª—è
./scripts/init_production_db.sh --fresh --force

# –ê–±–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –±–µ–∫–∞–ø—É
./scripts/init_production_db.sh backups/production_backup.tar.gz
```

### –ö—Ä–æ–∫ 6: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
sudo ./scripts/setup_production_server.sh \
  --port 3000 \
  --systemd \
  --firewall \
  --reverse-proxy \
  --nginx-config \
  --monitoring \
  --backup
```

### –ö—Ä–æ–∫ 7: SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏

```bash
# –ó Let's Encrypt
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com

# –ê–±–æ –∑ –≤–ª–∞—Å–Ω–∏–º–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞–º–∏
sudo ./scripts/setup_production_server.sh \
  --ssl \
  --ssl-cert /path/to/cert.pem \
  --ssl-key /path/to/key.pem
```

### –ö—Ä–æ–∫ 8: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º–∏
curl https://your-domain.com/health

# –¢–µ—Å—Ç MCP endpoint
curl -X POST https://your-domain.com/jsonrpc \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"tools/list","params":{},"id":1}'

# –¢–µ—Å—Ç –∑ Cursor
# –ù–∞–ª–∞—à—Ç—É–π—Ç–µ ~/.cursor/mcp.json –∑ URL –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
```

## –ë–µ–∑–ø–µ–∫–∞

### Firewall –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ë–∞–∑–æ–≤—ñ –ø—Ä–∞–≤–∏–ª–∞
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow ssh
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
sudo ufw allow from 10.0.0.0/8 to any port 3000
sudo ufw allow from 192.168.0.0/16 to any port 3000

# –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è firewall
sudo ufw enable
```

### Fail2ban –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è Nginx
sudo nano /etc/fail2ban/jail.local
```

```ini
[nginx-http-auth]
enabled = true
port = http,https
logpath = /var/log/nginx/error.log

[nginx-limit-req]
enabled = true
port = http,https
logpath = /var/log/nginx/error.log
maxretry = 10
```

### SSL/TLS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

```nginx
# /etc/nginx/sites-available/qa-mcp-server
server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    # SSL Configuration
    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;
    
    # Modern SSL configuration
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    
    # Security headers
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options DENY always;
    add_header X-Content-Type-Options nosniff always;
    add_header X-XSS-Protection "1; mode=block" always;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # Rate limiting
        limit_req zone=api burst=20 nodelay;
        
        # WebSocket support
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–∞–π–ª—É –ø–∞—Ä–æ–ª—ñ–≤ –¥–ª—è –±–∞–∑–æ–≤–æ—ó –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
sudo htpasswd -c /etc/nginx/.htpasswd admin

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
sudo htpasswd /etc/nginx/.htpasswd user1
sudo htpasswd /etc/nginx/.htpasswd user2
```

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –°–∏—Å—Ç–µ–º–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

```bash
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Prometheus —Ç–∞ Grafana
sudo apt install prometheus grafana

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Prometheus
sudo nano /etc/prometheus/prometheus.yml
```

```yaml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'qa-mcp-server'
    static_configs:
      - targets: ['localhost:3000']
    metrics_path: '/metrics'
    scrape_interval: 5s
```

### –õ–æ–≥—É–≤–∞–Ω–Ω—è

```bash
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è
sudo apt install rsyslog

# –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è Docker –ª–æ–≥—ñ–≤
sudo nano /etc/rsyslog.d/50-docker.conf
```

```
# Docker logs
:programname, isequal, "docker" /var/log/docker.log
& stop
```

### –ê–ª–µ—Ä—Ç–∏

```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –∞–ª–µ—Ä—Ç—ñ–≤
sudo nano /usr/local/bin/qa-mcp-alerts.sh
```

```bash
#!/bin/bash
# –ê–ª–µ—Ä—Ç–∏ –¥–ª—è QA MCP —Å–µ—Ä–≤–µ—Ä–∞

LOG_FILE="/var/log/qa-mcp-alerts.log"
DATE=$(date '+%Y-%m-%d %H:%M:%S')

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –∞–ª–µ—Ä—Ç—É
send_alert() {
    local message="$1"
    echo "[$DATE] ALERT: $message" >> "$LOG_FILE"
    
    # –í—ñ–¥–ø—Ä–∞–≤–∫–∞ email (–Ω–∞–ª–∞—à—Ç—É–π—Ç–µ sendmail –∞–±–æ postfix)
    echo "$message" | mail -s "QA MCP Server Alert" admin@your-domain.com
    
    # –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ Slack (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
    curl -X POST -H 'Content-type: application/json' \
        --data "{\"text\":\"QA MCP Server Alert: $message\"}" \
        https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
}

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
if ! systemctl is-active --quiet qa-mcp-server; then
    send_alert "QA MCP Server service is down"
fi

if ! curl -s http://localhost:3000/health > /dev/null; then
    send_alert "QA MCP Server HTTP endpoint is not responding"
fi

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–∏—Å–∫–∞
DISK_USAGE=$(df / | awk 'NR==2 {print $5}' | sed 's/%//')
if [ "$DISK_USAGE" -gt 80 ]; then
    send_alert "Disk usage is ${DISK_USAGE}%"
fi

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ
MEM_USAGE=$(free | awk 'NR==2{printf "%.0f", $3*100/$2}')
if [ "$MEM_USAGE" -gt 80 ]; then
    send_alert "Memory usage is ${MEM_USAGE}%"
fi
```

## –ë–µ–∫–∞–ø–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –±–µ–∫–∞–ø–∏

```bash
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è cron job –¥–ª—è –±–µ–∫–∞–ø—ñ–≤
crontab -e
```

```
# –©–æ–¥–µ–Ω–Ω–∏–π –±–µ–∫–∞–ø –æ 2:00
0 2 * * * /usr/local/bin/qa-mcp-backup.sh

# –©–æ—Ç–∏–∂–Ω–µ–≤–∏–π –±–µ–∫–∞–ø –≤ –Ω–µ–¥—ñ–ª—é –æ 3:00
0 3 * * 0 /usr/local/bin/qa-mcp-backup.sh --full

# –©–æ–º—ñ—Å—è—á–Ω–∏–π –±–µ–∫–∞–ø 1 —á–∏—Å–ª–∞ –æ 4:00
0 4 1 * * /usr/local/bin/qa-mcp-backup.sh --archive
```

### –ó–æ–≤–Ω—ñ—à–Ω—î –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è

```bash
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è S3 –¥–ª—è –±–µ–∫–∞–ø—ñ–≤
sudo apt install awscli

# –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è AWS
aws configure

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ S3
sudo nano /usr/local/bin/backup-to-s3.sh
```

```bash
#!/bin/bash
# –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±–µ–∫–∞–ø—ñ–≤ –≤ S3

BACKUP_DIR="/var/backups/qa-mcp"
S3_BUCKET="your-qa-mcp-backups"
DATE=$(date +%Y%m%d_%H%M%S)

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–µ–∫–∞–ø—É
cd /path/to/qa_mcp
./scripts/backup_database.sh "s3_backup_$DATE"

# –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ S3
aws s3 cp "$BACKUP_DIR/s3_backup_$DATE.tar.gz" "s3://$S3_BUCKET/"

# –í–∏–¥–∞–ª–µ–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–∏—Ö –±–µ–∫–∞–ø—ñ–≤ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω—ñ–≤
find "$BACKUP_DIR" -name "s3_backup_*.tar.gz" -mtime +7 -delete
```

## –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

```yaml
# docker-compose.prod.yml
version: '3.8'

services:
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - mcp-server-1
      - mcp-server-2
      - mcp-server-3

  mcp-server-1:
    build: .
    environment:
      - INSTANCE_ID=1
    depends_on:
      - mysql
      - qdrant

  mcp-server-2:
    build: .
    environment:
      - INSTANCE_ID=2
    depends_on:
      - mysql
      - qdrant

  mcp-server-3:
    build: .
    environment:
      - INSTANCE_ID=3
    depends_on:
      - mysql
      - qdrant

  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: secure_password
    volumes:
      - mysql_data:/var/lib/mysql

  qdrant:
    image: qdrant/qdrant:v1.15.1
    volumes:
      - qdrant_data:/qdrant/storage

volumes:
  mysql_data:
  qdrant_data:
```

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

```bash
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ –¥–ª—è Docker
sudo nano /etc/docker/daemon.json
```

```json
{
  "default-ulimits": {
    "memlock": {
      "Hard": -1,
      "Name": "memlock",
      "Soft": -1
    }
  },
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "10m",
    "max-file": "3"
  }
}
```

## –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

```sql
-- MySQL –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è
SET GLOBAL innodb_buffer_pool_size = 2G;
SET GLOBAL innodb_log_file_size = 256M;
SET GLOBAL max_connections = 200;

-- –Ü–Ω–¥–µ–∫—Å–∏ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–æ—à—É–∫—É
CREATE INDEX idx_testcase_functionality ON testcases(functionality);
CREATE INDEX idx_testcase_priority ON testcases(priority);
CREATE INDEX idx_checklist_section ON checklists(section_id);
```

### Qdrant –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

```yaml
# qdrant-config.yaml
storage:
  # –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è SSD
  storage_path: "/qdrant/storage"
  
  # –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø–∞–º'—è—Ç—ñ
  on_disk_payload: true
  
  # –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å
  max_optimization_threads: 4

service:
  # –ö–µ—à—É–≤–∞–Ω–Ω—è
  enable_cors: true
  
  # –õ–æ–≥—É–≤–∞–Ω–Ω—è
  log_level: "INFO"
```

### Nginx –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

```nginx
# /etc/nginx/nginx.conf
worker_processes auto;
worker_cpu_affinity auto;

events {
    worker_connections 1024;
    use epoll;
    multi_accept on;
}

http {
    # –ö–µ—à—É–≤–∞–Ω–Ω—è
    open_file_cache max=1000 inactive=20s;
    open_file_cache_valid 30s;
    open_file_cache_min_uses 2;
    open_file_cache_errors on;
    
    # Gzip —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml;
    
    # Rate limiting
    limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
}
```

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è

### –†–µ–≥—É–ª—è—Ä–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

```bash
# –©–æ–¥–µ–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
0 1 * * * /usr/local/bin/qa-mcp-daily-maintenance.sh

# –©–æ—Ç–∏–∂–Ω–µ–≤—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
0 2 * * 0 /usr/local/bin/qa-mcp-weekly-maintenance.sh

# –©–æ–º—ñ—Å—è—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
0 3 1 * * /usr/local/bin/qa-mcp-monthly-maintenance.sh
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
sudo nano /usr/local/bin/qa-mcp-update.sh
```

```bash
#!/bin/bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è QA MCP —Å–µ—Ä–≤–µ—Ä–∞

set -e

PROJECT_DIR="/path/to/qa_mcp"
BACKUP_DIR="/var/backups/qa-mcp"

echo "üîÑ –ü–æ—á–∞—Ç–æ–∫ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è QA MCP —Å–µ—Ä–≤–µ—Ä–∞..."

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–µ–∫–∞–ø—É
cd "$PROJECT_DIR"
./scripts/backup_database.sh "update_backup_$(date +%Y%m%d_%H%M%S)"

# –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤—ñ—Å—ñ–≤
sudo systemctl stop qa-mcp-server

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É
git pull origin main

# –ü–µ—Ä–µ–±—É–¥–æ–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
docker compose build --no-cache

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—ñ–≤
sudo systemctl start qa-mcp-server

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
sleep 30
if curl -s http://localhost:3000/health > /dev/null; then
    echo "‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ"
else
    echo "‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –±–µ–∫–∞–ø—É..."
    # –õ–æ–≥—ñ–∫–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
fi
```

## Troubleshooting

### –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

1. **–í–∏—Å–æ–∫–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CPU**
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –Ω–∞ –∑–∞–≤–∏—Å–ª—ñ –∑–∞–ø–∏—Ç–∏
   - –û–ø—Ç–∏–º—ñ–∑—É–π—Ç–µ –∑–∞–ø–∏—Ç–∏ –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
   - –î–æ–¥–∞–π—Ç–µ —ñ–Ω–¥–µ–∫—Å–∏

2. **–í–∏—Å–æ–∫–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ**
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞ –≤–∏—Ç–æ–∫–∏ –ø–∞–º'—è—Ç—ñ
   - –ó–±—ñ–ª—å—à—ñ—Ç—å swap
   - –û–ø—Ç–∏–º—ñ–∑—É–π—Ç–µ –∫–µ—à—É–≤–∞–Ω–Ω—è

3. **–ü–æ–≤—ñ–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –º–µ—Ä–µ–∂–µ–≤–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
   - –û–ø—Ç–∏–º—ñ–∑—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–∏—Ö
   - –î–æ–¥–∞–π—Ç–µ –∫–µ—à—É–≤–∞–Ω–Ω—è

### –ö–æ–º–∞–Ω–¥–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```bash
# –°–∏—Å—Ç–µ–º–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏
htop
iotop
nethogs

# Docker —Ä–µ—Å—É—Ä—Å–∏
docker stats
docker system df
docker system prune

# –ú–µ—Ä–µ–∂–µ–≤—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è
netstat -tlnp
ss -tlnp
lsof -i :3000

# –õ–æ–≥–∏
journalctl -u qa-mcp-server -f
docker compose logs -f
tail -f /var/log/nginx/access.log
```

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### –ü–µ—Ä–µ–¥ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è–º

- [ ] –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ
- [ ] Docker —Ç–∞ Docker Compose –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ
- [ ] Firewall –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –æ—Ç—Ä–∏–º–∞–Ω—ñ
- [ ] –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è `.env` –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞
- [ ] –ë–∞–∑–∏ –¥–∞–Ω–∏—Ö —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ

### –ü—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

- [ ] –°–µ—Ä–≤—ñ—Å–∏ –∑–∞–ø—É—â–µ–Ω—ñ —Ç–∞ –ø—Ä–∞—Ü—é—é—Ç—å
- [ ] HTTP endpoints –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å
- [ ] MCP —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ
- [ ] –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π
- [ ] –ë–µ–∫–∞–ø–∏ –ø—Ä–∞—Ü—é—é—Ç—å
- [ ] –ê–ª–µ—Ä—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–∞

### –†–µ–≥—É–ª—è—Ä–Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è

- [ ] –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥—ñ–≤
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤
- [ ] –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∫–∞–ø—ñ–≤
- [ ] –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤
- [ ] –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º–∏
2. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
3. –°—Ç–≤–æ—Ä—ñ—Ç—å issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
4. –ó–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –∫–æ–º–∞–Ω–¥–∏ —Ä–æ–∑—Ä–æ–±–∫–∏

**–ö–æ–Ω—Ç–∞–∫—Ç–∏:**
- Email: support@your-domain.com
- Slack: #qa-mcp-support
- GitHub Issues: https://github.com/your-org/qa_mcp/issues
