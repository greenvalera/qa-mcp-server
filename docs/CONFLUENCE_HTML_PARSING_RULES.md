# CONFLUENCE HTML PARSING RULES

Тут описано, як парсити HTML структуру документу чеклісту з CONFLUENCE.

## Check
Кожен окремий документ, який містить таблицю тесткейсів є окремими чеклістом.
Він зберігається в тблиці чеклістів як окремий запис.
Ім'я чекліста співпадає з тайтлом документу чекліста.

## Subcategory
Якщо документ не містить таблицю тесткейсів - то такий документ не є чеклістом і зберігати його як окремий запис чекліста в БД не треба.
Якщо такий документ є батьківським для струкутури інших документів чеклістів, то це  Subcategory.
Треба використовувати тайтл такого документа, як поле Subcategory для чеклістів, які є дочірніми по відношенню до даного чекліста.

## Таблиця чеклістів
В структурі HTML документа стоірнки чекліста важлива таблиця тесткейсів.
ЇЇ початок визначається шапкою таблиці з полями:
* №	
* STEP
* EXPECTED RESULT
* SCREENSHOT
* PRIORITY
* CONFIG
* QA AUTO COVERAGE
В кожному документі точно є така таблиця. Якщо список полів дещо відрізняється, це все одно валідна таблиця.

## Розділові рядки
В кожній таблиці є розділові рядки, об'єднані по всій ширині таблиці.
Ці рядки не є окремими тесткейсами, створювати записи тесткейсів з них не потрібно.
Їх роль - групування тесткейсів по одному з признаків, які відображають поля запису тесткейса. 
Всі тесткейси, які йдуть за таким рядком мають використовувати це значення у відповідному полі в БД.
Далі йдуть типи значень і відповідність до конкретного поля тесткейса. 


### GENERAL / CUSTOM
В кодній таблиці є основні розділи GENERAL або CUSTOM. GENERAL є завжди, CUSTOM може бути відсутнім.
При збереженні тесткейсів треба використовувати це значення для поля Test Group.

### Functionality
В середені блоків GENERAL / CUSTOM можуть бути також розділові поля з довільними строковими значеннями. Це групування по признаку Functionality.
Значення такого розділового поля треба використовувати, як значення поля Functionality при збереженні запису тесткейсу.
Якщо В середені блока GENERAL / CUSTOM перед десткейсами немає жодного іншого розділового рядка, то поле Functionality для таких тесткейсів треба зберігати як NULL.

## Поля тесткейсу
Кожний рядок таблиці, який не є розділовим і поділений на стовбчики згідно полям хедера таблиці - є окремим тесткейсом, який треба зберігати в базі.
Відповідність полів таблиці полям в базі даних в форматі [поле таблиці] -> [поле в БД]
STEP - Step
EXPECTED RESULT - Expected Result
SCREENSHOT - Screenshot (В БД ставитсья null)
PRIORITY - Priority
CONFIG - Config ID (запис конфіга створюється в окремій таблиці)
QA AUTO COVERAGE - QA Auto Coverage (зберігається текст як є, або null)

Додатково поля тесткейсу в БД, які не мають відповідності в таблиці.
Order Index - визначається, як порядок тесткейса в таблиці
Checklist ID - визначається належність до певного тесткейсу